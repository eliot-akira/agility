!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var f="function"==typeof require&&require;if(!s&&f)return f(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){!function(i){if(!i.jQuery)throw"agility.js: jQuery not found";var r,o=(i.document,i.location,jQuery),a=e("./util/util"),s=(e("./util/jquery.util"),e("./util/object-shim"),e("./util/timed"),e("./prototype/index")),f=e("./util/eventify.js"),l=0;r=function(){var e,t=Array.prototype.slice.call(arguments,0),n={},i=s;if("object"==typeof t[0]&&a.isAgility(t[0])&&(i=t[0],t.shift()),n=Object.create(i),n.model=Object.create(i.model),n.view=Object.create(i.view),n.controller=Object.create(i.controller),n._container=Object.create(i._container),n._events=Object.create(i._events),n.form=Object.create(i.form),n._id=l++,n._parent=null,n._events.data={},n._container.children={},n.view.$root=i.view.$root instanceof jQuery&&i._template?o(i.view.$root.outerHTML()):o(),n.model._data=i.model._data?o.extend(!0,{},i.model._data):{},n._data=i._data?o.extend(!0,{},i._data):{},0===t.length);else if("string"==typeof t[0])"#"===t[0][0]?(e=o(t[0]),"script"===e.prop("tagName").toLowerCase()?n.view.format=e.html():(n.view.format=e.outerHTML(),n.view.$root=e,n._template=!0)):n.view.format=t[0],t.length>1&&"object"==typeof t[1]&&(o.extend(n.controller,t[1]),a.extendController(n));else if(1===t.length&&"object"==typeof t[0]&&(t[0].model||t[0].view))for(var r in t[0])"model"===r?o.extend(n.model._data,t[0].model):"view"===r?"string"==typeof t[0].view?"#"===t[0].view[0]?(e=o(t[0].view),n.view.format=e.html(),"script"===e.prop("tagName").toLowerCase()?n.view.format=e.html():(n.view.format=e.outerHTML(),n.view.$root=e,n._template=!0)):n.view.format=t[0].view:o.extend(n.view,t[0].view):"controller"===r||"events"===r?(o.extend(n.controller,t[0][r]),a.extendController(n)):n[r]=t[0][r];else{if("object"==typeof t[0])o.extend(n.model._data,t[0]);else if(t[0])throw"agility.js: unknown argument type (model)";if("string"==typeof t[1])"#"===t[1][0]?(e=o(t[1]),"script"===e.prop("tagName").toLowerCase()?n.view.format=e.html():(n.view.format=e.outerHTML(),n.view.$root=e,n._template=!0)):n.view.format=t[1];else if("object"==typeof t[1])o.extend(n.view,t[1]);else if(t[1])throw"agility.js: unknown argument type (view)";if("string"==typeof t[2]&&(n.view.style=t[2],t.splice(2,1)),"object"==typeof t[2])o.extend(n.controller,t[2]),a.extendController(n);else if(t[2])throw"agility.js: unknown argument type (controller)"}n.model._initData=o.extend({},n.model._data),a.proxyAll(n,n),n.view.render();var f=function(e,t){"function"==typeof t&&n.bind(e,t)};for(var u in n.controller){var c=u.split(";"),d=n.controller[u];o.each(c,function(e,t){t=o.trim(t),f(t,d)})}return n.trigger("create"),n},r.document=r({_document:!0,view:{$:function(e){return e?o(e,"body"):o("body")}},controller:{_create:function(){}}}),r.fn=s,r.module={},r.isAgility=function(e){return"object"!=typeof e?!1:a.isAgility(e)},r.eventify=f,"function"==typeof define&&define.amd?define([],function(){return r}):"object"==typeof n?t.exports=r:i.$$=r}(window)},{"./prototype/index":13,"./util/eventify.js":15,"./util/jquery.util":16,"./util/object-shim":17,"./util/timed":18,"./util/util":19}],2:[function(e,t){t.exports={_create:function(){this.view.stylize(),this.view.bindings(),this.view.sync()},_destroy:function(){if(this.view.style){var e="agility_"+this._id;$("head #"+e,window.document).remove()}this._container.empty(),this.view.$().remove()},_append:function(e,t,n){this.view.$(n).append(t.view.$())},_prepend:function(e,t,n){this.view.$(n).prepend(t.view.$())},_before:function(e,t,n){if(!n)throw"agility.js: _before needs a selector";this.view.$(n).before(t.view.$())},_after:function(e,t,n){if(!n)throw"agility.js: _after needs a selector";this.view.$(n).after(t.view.$())},_remove:function(){},_change:function(){}}},{}],3:[function(e,t){t.exports=function(e){if(void 0===e)return this.model._data;if("string"==typeof e){var t=e.split("."),n=this.model._data[t[0]];if($.isPlainObject(n))for(var i=1;i<t.length;i++)n=$.isPlainObject(n)&&n[t[i]]?n[t[i]]:n[t.splice(i).join(".")];else n=this.model._data[e];return n}throw"agility.js: unknown argument for getter"}},{}],4:[function(e,t){t.exports=function(e,t,n){var i,r=this,o=[],a={};if("string"==typeof e&&(i=e,e={},e[i]="object"==typeof t?$.extend({},t):t,t=n||{}),"object"!=typeof e)throw"agility.js: unknown argument type in model.set()";var s={};if(t&&t.reset)s=this.model._data,this.model._data=$.extend({},e);else{s=$.extend({},this.model._data);for(var f in e)if(f.indexOf(".")>-1){var l=f.split("."),u=this.model._data[l[0]];u||(u=this.model._data[l[0]]={});for(var c,d=1;d<l.length-1;d++)c=u[l[d]],$.isPlainObject(c)?u=c:(u[l[d]]={},u=u[l[d]]);var h=l[l.length-1];$.isPlainObject(e[p])&&$.isPlainObject(u[h])?$.extend(u[h],e[f]):u[h]=e[f],o.push(f),a[f]=s[f],delete s[f],delete e[f]}$.extend(this.model._data,e)}for(var p in e)this.model._data[p]!==s[p]&&(o.push(p),a[p]=s[p]),delete s[p];for(p in s)this.model._data[p]!==s[p]&&(o.push(p),a[p]=s[p]);return t&&t.silent===!0?this:(this.trigger("change",[o,a]),$.each(o,function(e,t){r.trigger("change:"+t,a[t])}),this)}},{}],5:[function(e,t){e("../util/jquery.util");t.exports={invalid:function(){var e=[];for(var t in this.required)this.model.isValidKey(t)||e.push(t);return e},isValid:function(e){return"undefined"==typeof e?0===this.model.invalid().length:this.model.isValidKey(e)},isValidKey:function(e){if("undefined"==typeof this.required[e])return!0;var t=this.model.get(e),n=this.required[e];return n===!0?!$.isEmpty(t):"email"===n?$.isEmail(t):!0}}},{"../util/jquery.util":16}],6:[function(e,t){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("../util/util"),o=e("./model-validate"),a={get:e("./model-get"),set:e("./model-set"),reset:function(){return this.model.set(this.model._initData,{reset:!0}),this},size:function(){return r.size(this.model._data)},each:function(e){return i.each(this.model._data,i.proxy(e,this)),this}};t.exports=i.extend(a,o)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/util":19,"./model-get":3,"./model-set":4,"./model-validate":5}],7:[function(e,t){function n(e){var t,n={key:null,attr:[]},i=e.split(","),r=/([a-zA-Z0-9_\-\.]+)(?:[\s=]+([a-zA-Z0-9_\-]+))?/,o=!1;if(i.length>0)for(var a=0;a<i.length;a++)if(t=i[a].match(r))if("undefined"==typeof t[2]||""===t[2]){if(o)throw new Error("You may specify only one key ("+o+" has already been specified in data-bind="+e+")");o=t[1],n.key=t[1]}else n.attr.push({attr:t[1],attrVar:t[2]});return n}t.exports=function(){var e=this,t=this.view.$().filter("[data-bind]"),i=this.view.$("[data-bind]"),r=function(t,n,i){var r=t.attr[i];return function(){"html"==r.attr?n.html(e.model.get(r.attrVar)):n.attr(r.attr,e.model.get(r.attrVar))}};return t.add(i).each(function(){var t=$(this),i=n(t.data("bind")),o=t.data("required"),a=function(){if(i.attr)for(var n=0;n<i.attr.length;n++)e.bind("_change:"+i.attr[n].attrVar,r(i,t,n))};i.key&&(t.is("input:checkbox")?(e.bind("_change:"+i.key,function(){t.prop("checked",e.model.get(i.key))}),t.change(function(){var t={};t[i.key]=$(this).prop("checked"),e.model.set(t)})):t.is("select")?(e.bind("_change:"+i.key,function(){var n=(t.attr("name"),e.model.get(i.key));t.val(n)}),t.change(function(){var n={};n[i.key]=t.val(),e.model.set(n)})):t.is("input:radio")?(e.bind("_change:"+i.key,function(){var n=t.attr("name"),r=e.model.get(i.key);e.view.$root.find('input[name="'+n+'"]').filter('[value="'+r+'"]').prop("checked",!0)}),t.change(function(){if(t.prop("checked")){var n={};n[i.key]=t.val(),e.model.set(n)}})):t.is('input[type="search"]')?(e.bind("_change:"+i.key,function(){t.val(e.model.get(i.key))}),t.keypress(function(){setTimeout(function(){var n={};n[i.key]=t.val(),e.model.set(n)},50)})):t.is('input:text, input[type!="search"], textarea')?(e.bind("_change:"+i.key,function(){t.val(e.model.get(i.key))}),t.change(function(){var t={};t[i.key]=$(this).val(),e.model.set(t)})):e.bind("_change:"+i.key,function(){var n=e.model.get(i.key);t.text(n||0===n?e.model.get(i.key).toString():"")})),a(),i.attr.forEach(function(n){"keyup"===n.attr?(t.keyup(function(){setTimeout(function(){e.model.set(n.attrVar,t.val())},50)}),e.bind("_change:"+n.attrVar,function(){t.val(e.model.get(n.attrVar))})):"visible"===n.attr}),e.$node[i.key]=t,e.key[t]=i.key,"undefined"!=typeof o&&(e.required[i.key]=o)}),this}},{}],8:[function(e,t){var n=e("./view-bind"),i="&";t.exports={format:"<div/>",style:"",$:function(e){return e&&e!==i?this.view.$root.find(e):this.view.$root},render:function(){if(0===this.view.format.length)throw"agility.js: empty format in view.render()";if(this.view.$root instanceof jQuery&&this._template||(0===this.view.$root.size()?this.view.$root=$(this.view.format):this.view.$root.html($(this.view.format).html())),!(this.view.$root instanceof jQuery)&&0===this.view.$root.size())throw"agility.js: could not generate html from format";return this.$view=this.view.$root,this.$=this.view.$,this},bindings:n,sync:function(){var e=this;return this.model.each(function(t){e.trigger("_change:"+t)}),this.model.size()>0&&this.trigger("_change"),this},stylize:function(){var e,t=new RegExp(i,"g");if(0!==this.view.style.length&&0!==this.view.$().size()){if(this.view.hasOwnProperty("style")){e="agility_"+this._id;var n=this.view.style.replace(t,"."+e);$("head",window.document).append('<style id="'+e+'" type="text/css">'+n+"</style>"),this.view.$().addClass(e)}else{var r=function(e){for(;null!==e;)if(e=Object.getPrototypeOf(e),e.view.hasOwnProperty("style"))return e._id;return void 0},o=r(this);e="agility_"+o,this.view.$().addClass(e)}return this}},$bound:function(e){return void 0!==typeof this.$node[e]?this.$node[e]:!1}}},{"./view-bind":7}],9:[function(e,t){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("../util/util");t.exports={_insertObject:function(e,t,n){var i=this;if(!r.isAgility(e))throw"agility.js: append argument is not an agility object";return this._container.children[e._id]=e,this.trigger(n,[e,t]),e._parent=this,e.bind("destroy",function(e,t){i._container.remove(t)}),e.trigger("parent:"+n),this},append:function(e,t){return this._container._insertObject.call(this,e,t,"append")},prepend:function(e,t){return this._container._insertObject.call(this,e,t,"prepend")},after:function(e,t){return this._container._insertObject.call(this,e,t,"after")},before:function(e,t){return this._container._insertObject.call(this,e,t,"before")},remove:function(e){return delete this._container.children[e],this.trigger("remove",e),this},each:function(e){return i.each(this._container.children,e),this},empty:function(){return this.each(function(){this.destroy()}),this},size:function(){return r.size(this._container.children)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/util":19}],10:[function(e,t){(function(e){function n(e){var t={type:e},n=e.search(/\s/);return n>-1?(t.type=e.substr(0,n),t.selector=e.substr(n+1)):("click"===e||"submit"===e)&&(t.type=e,t.selector=o),t}function i(e,t){var n=r(e).data("events");if(void 0!==n&&void 0!==n[t]){var i=[];for(var o in n[t])n[t].hasOwnProperty(o)&&i.unshift(n[t][o]);n[t]=i}}var r="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,o="&";t.exports={bind:function(e,t){var i=n(e);if(i.selector){var a=function(e){return t(e),!1};i.selector===o?"click"===i.type||"submit"===i.type?this.view.$().on(i.type,a):this.view.$().on(i.type,t):"click"===i.type||"submit"===i.type?this.view.$().on(i.type,i.selector,a):this.view.$().on(i.type,i.selector,t)}else r(this._events.data).on(i.type,t);return this},on:function(e,t){return this._events.bind(e,t)},trigger:function(e,t){var a=n(e);return a.selector?a.selector===o?this.view.$().trigger(a.type,t):this.view.$().find(a.selector).trigger(a.type,t):(r(this._events.data).trigger("_"+a.type,t),i(this._events.data,"pre:"+a.type),r(this._events.data).trigger("pre:"+a.type,t),i(this._events.data,"pre:"+a.type),r(this._events.data).trigger(a.type,t),this.parent()&&this.parent().trigger((a.type.match(/^child:/)?"":"child:")+a.type,t),r(this._events.data).trigger("post:"+a.type,t)),this}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t){(function(e){var n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null;t.exports={get:function(e){return this.model.get(e)},set:function(e,t,n){return this.model.set(e,t,n)},invalid:function(){return this.model.invalid()},replace:function(e,t){return"string"==typeof t&&this.view.$(t).html(""),this.empty()._container.append.apply(this,arguments),this},child:function(e){var t=0;e=e||0;for(var n in this._container.children)if(this._container.children.hasOwnProperty(n)){if(t==e)return this._container.children[n];if(t>e)return!1;t++}return!1},children:function(){return this._container.children},load:function(e,t,i){var r=this,o=t.length,a=this.size();if(n.each(t,function(t,n){r.child(t)?r.child(t).model.set(n):r.append($$(e,n),i)}),a>o)for(var s=o;a>s;s++)r.child(o).destroy();return this}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t){(function(e){"undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null;t.exports={form:{clear:function(){return this.$view.find(":input, textarea").not(":button, :submit, :reset, :hidden").removeAttr("checked").removeAttr("selected").not(":checkbox, :radio, select").val("")},invalid:function(){return this.model.invalid()}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t){(function(n){var i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r={_agility:!0,_container:e("./container"),_events:e("./events"),$node:{},key:{},required:{},model:e("../mvc/model"),view:e("../mvc/view"),controller:e("../mvc/controller")},o=e("./shortcuts"),a=e("./extend"),s=e("./form");t.exports=i.extend(r,o,a,s)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../mvc/controller":2,"../mvc/model":6,"../mvc/view":8,"./container":9,"./events":10,"./extend":11,"./form":12,"./shortcuts":14}],14:[function(e,t){t.exports={destroy:function(){this.trigger("destroy",this._id)},parent:function(){return this._parent},append:function(){return this._container.append.apply(this,arguments),this},prepend:function(){return this._container.prepend.apply(this,arguments),this},after:function(){return this._container.after.apply(this,arguments),this},before:function(){return this._container.before.apply(this,arguments),this},remove:function(){return this._container.remove.apply(this,arguments),this},size:function(){return this._container.size.apply(this,arguments)},each:function(){return this._container.each.apply(this,arguments)},empty:function(){return this._container.empty.apply(this,arguments)},bind:function(){return this._events.bind.apply(this,arguments),this},on:function(){return this._events.bind.apply(this,arguments),this},trigger:function(){return this._events.trigger.apply(this,arguments),this}}},{}],15:[function(e,t){var n=function(){function e(e,t,n,i){return"string"==typeof e&&"function"==typeof t&&(n=parseInt(n||10,10),l("actions",e,t,n,i)),d}function t(){var e=Array.prototype.slice.call(arguments),t=e.shift();return"string"==typeof t&&c("actions",t,e),d}function n(e,t){return"string"==typeof e&&f("actions",e,t),d}function i(){return h.actions}function r(){return h.filters}function o(e,t,n){return"string"==typeof e&&"function"==typeof t&&(n=parseInt(n||10,10),l("filters",e,t,n)),d}function a(){var e=Array.prototype.slice.call(arguments),t=e.shift();return"string"==typeof t?c("filters",t,e):d}function s(e,t){return"string"==typeof e&&f("filters",e,t),d}function f(e,t,n,i){if(h[e][t])if(n){var r,o=h[e][t];if(i)for(r=o.length;r--;){var a=o[r];a.callback===n&&a.context===i&&o.splice(r,1)}else for(r=o.length;r--;)o[r].callback===n&&o.splice(r,1)}else h[e][t]=[]}function l(e,t,n,i,r){var o={callback:n,priority:i,context:r},a=h[e][t];a?(a.push(o),a=u(a)):a=[o],h[e][t]=a}function u(e){for(var t,n,i,r=1,o=e.length;o>r;r++){for(t=e[r],n=r;(i=e[n-1])&&i.priority>t.priority;)e[n]=e[n-1],--n;e[n]=t}return e}function c(e,t,n){var i=h[e][t];if(!i)return"filters"===e?n[0]:!1;var r=0,o=i.length;if("filters"===e)for(;o>r;r++)n[0]=i[r].callback.apply(i[r].context,n);else for(;o>r;r++)i[r].callback.apply(i[r].context,n);return"filters"===e?n[0]:!0}var d={filter:a,addFilter:o,removeFilter:s,listFilters:r,on:e,off:n,trigger:t,listActions:i},h={actions:{},filters:{}};return d};t.exports=function(e){return"undefined"==typeof e&&(e={}),$.extend(e,new n)}},{}],16:[function(){(function(e){var t="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null;t.fn.outerHTML=function(e){if(e)return this.before(e).remove();var t=this[0]?this[0].ownerDocument:document;return jQuery("<div>",t).append(this.eq(0).clone()).html()},t.isEmpty=function(e){var t,n,i,r,o=[t,null,""];for(i=0,r=o.length;r>i;i++)if(e===o[i])return!0;if("object"==typeof e){for(n in e)return!1;return!0}return!1},t.isEmail=function(e){if(t.isEmpty(e))return!1;var n=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return n.test(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(){(!Object.create||Object.create.toString().search(/native code/i)<0)&&(Object.create=function(e){var t=function(){};return $.extend(t.prototype,e),new t}),(!Object.getPrototypeOf||Object.getPrototypeOf.toString().search(/native code/i)<0)&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype})},{}],18:[function(){(function(e){function t(e,t){this.setTimeout(e,t)}var n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,i={},r=1e4;n.fn.timedClass=function(e,t){var i=n(this);return n(this).timedFn(function(){i.addClass(e)},function(){i.removeClass(e)},t||r)},n.fn.timedText=function(e,t){var i=n(this);return n(this).timedFn(function(){i.text(e)},function(){i.text("")},t||r)},n.fn.timedFn=function(e,n,o,a){return a=a||r,"function"==typeof e?(a=o||a,o=n,n=e,new t(function(){o()},a),n()):"undefined"==typeof i[e]||i[e].finished?(i[e]=new t(function(){o()},a),n()):void i[e].add(a)},t.prototype.setTimeout=function(e,t){var n=this;this.finished=!1,this.callback=e,this.time=t,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){n.finished=!0,n.callback()},t),this.start=Date.now()},t.prototype.add=function(e){this.finished||(e=this.time-(Date.now()-this.start)+e,this.setTimeout(this.callback,e))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t){(function(e){var n={},i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null;n.isAgility=function(e){return e._agility===!0},n.proxyAll=function(e,t){if(!e||!t)throw"agility.js: util.proxyAll needs two arguments";for(var n in e){var r=e[n];if("function"==typeof e[n])r=e[n]._noProxy?e[n]:i.proxy(e[n]._preProxy||e[n],t),r._preProxy=e[n]._noProxy?void 0:e[n]._preProxy||e[n],e[n]=r;else if("object"==typeof e[n]&&!(e[n]instanceof jQuery)){for(var o in e[n]){var a=e[n][o];"function"==typeof e[n][o]&&(a=e[n][o]._noProxy?e[n][o]:i.proxy(e[n][o]._preProxy||e[n][o],t),a._preProxy=e[n][o]._noProxy?void 0:e[n][o]._preProxy||e[n][o],r[o]=a)}e[n]=r}}},n.size=function(e){var t,n=0;for(t in e)n++;return n},n.extendController=function(e){for(var t in e.controller)!function(){var n,i,r,o,a,s;if("function"==typeof e.controller[t]){if(n=t.match(/^(\~)*(.+)/),i=n[1],r=n[2],!i)return;o=e.controller[r]?e.controller[r]._preProxy||e.controller[r]:void 0,a=e.controller[t],s=function(){o&&o.apply(this,arguments),a&&a.apply(this,arguments)},e.controller[r]=s,delete e.controller[t]}}()},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);